{% extends "base.html" %}
{% block title %}Staff list{% endblock %}
{% block content %}

<h1>Staff list â€” {{ day|date_long }}</h1>

<form method="get" class="filters" action="/admin/staff">
  <div>
    <label>Date</label>
    <input class="control" type="date" name="d" value="{{ day }}">
  </div>

  <div>
    <label>Role</label>
    <select class="control" name="role">
      <option value="">Any role</option>
      {% for r in roles %}
        <option value="{{ r.code }}" {% if active_role==r.code %}selected{% endif %}>
          {{ r.label }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div>
    <label>Location</label>
    <select class="control" name="location">
      <option value="">Any location</option>
      {% for l in locations %}
        <option value="{{ l.code }}" {% if active_loc==l.code %}selected{% endif %}>
          {{ l.name }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div>
    <label>Status</label>
    <select class="control" name="status">
      <option value=""  {% if status=="" %}selected{% endif %}>Any status</option>
      <option value="active"   {% if status=="active" %}selected{% endif %}>Active</option>
      <option value="inactive" {% if status=="inactive" %}selected{% endif %}>Inactive</option>
    </select>
  </div>

  <div>
    <label>Search</label>
    <input class="control" type="text" name="q" value="{{ q }}" placeholder="name or mobile">
  </div>

  <div>
    <label>&nbsp;</label>
    <button class="btn" type="submit">Apply</button>
  </div>
</form>

<div class="actions">
  <a class="btn primary" href="/admin/staff/new">+ Add staff</a>
  <a class="btn" href="/admin/staff/export.csv?d={{ day }}&role={{ active_role }}&location={{ active_loc }}&status={{ status }}&q={{ q }}">Export CSV</a>
</div>

<div class="card table-wrap">
  <table class="table">
    <thead>
      <tr>
        <th>Name</th><th>Role</th><th>Location</th><th>Mobile</th><th>Status</th>
      </tr>
    </thead>
    <tbody id="staff-rows">
      {% include "partials/staff_table_rows.html" %}
    </tbody>
  </table>
</div>

{% endblock %}
